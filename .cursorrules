#  Cursor/Claude AI Rules para Palindrome Ecommerce

##  CONTEXTO DEL PROYECTO
Este es un challenge t茅cnico para Acueducto Studio - Fullstack Developer Senior.
Ecommerce de tenis con descuentos autom谩ticos del 50% al buscar pal铆ndromos.

##  STACK TECNOLGICO OBLIGATORIO
- Frontend: Next.js 14, TypeScript, Tailwind CSS, Shadcn/ui
- Backend: NestJS, TypeORM, PostgreSQL
- Testing: Jest, Testing Library, Playwright
- DevOps: Docker, Docker Compose

##  REGLAS DE CDIGO

### General
- Usar TypeScript estricto en todo el proyecto
- Seguir convenciones de Clean Code y Clean Architecture
- Documentar funciones complejas con JSDoc
- Manejar errores apropiadamente con try-catch
- Usar nombres descriptivos en ingl茅s para variables/funciones
- Comentarios en espa帽ol para explicaciones de negocio

### Backend (NestJS)
- Usar decoradores apropiados (@Injectable, @Controller, etc.)
- Implementar DTOs con class-validator para validaci贸n
- Usar Repository Pattern con TypeORM
- Separar l贸gica de negocio en servicios
- Implementar tests unitarios y de integraci贸n

### Frontend (Next.js)
- Usar App Router de Next.js 14
- Componentes funcionales con TypeScript
- Hooks personalizados para l贸gica reutilizable
- Shadcn/ui para componentes base
- Tailwind para estilos con clases utilitarias
- Estados de carga y manejo de errores en UI

### Testing
- Tests unitarios para utilidades y servicios
- Tests de componentes con Testing Library
- Tests E2E con Playwright para flujos cr铆ticos
- Mocks apropiados para dependencias externas

##  DISEO Y UX
- Dise帽o moderno con glassmorphism
- Responsive design mobile-first
- Animaciones fluidas y micro-interacciones
- Estados de carga con skeletons
- Feedback visual inmediato para acciones

##  LGICA DE NEGOCIO ESPECFICA

### Pal铆ndromos
- Ignorar espacios, puntuaci贸n y case
- Soportar caracteres Unicode (帽, acentos)
- Aplicar 50% descuento autom谩tico
- Mostrar indicadores visuales de descuento

### B煤squeda de Productos
- T铆tulo: b煤squeda EXACTA (case-insensitive)
- Marca/Descripci贸n: LIKE parcial solo si > 3 caracteres
- Retornar productos con descuento aplicado si es pal铆ndromo

##  DOCKER Y DEVOPS
- Dockerfile optimizado para desarrollo y producci贸n
- docker-compose.yml para orquestaci贸n completa
- Hot reload en modo desarrollo
- Scripts npm para tareas comunes
- Variables de entorno apropiadas

##  DOCUMENTACIN
- README completo con instrucciones detalladas
- Ejemplos de uso de API
- Comandos espec铆ficos para diferentes escenarios
- Troubleshooting para problemas comunes

##  CRITERIOS DE CALIDAD
- C贸digo autodocumentado y mantenible
- Arquitectura escalable y modular
- Performance optimizado
- Seguridad b谩sica implementada (validaciones, CORS)
- Tests que cubran casos edge importantes

##  CONVENCIONES DE COMMITS
- Usar Conventional Commits para todos los commits
- Formato: `tipo(scope): descripci贸n`
- Tipos permitidos:
  - `feat`: Nueva funcionalidad
  - `fix`: Correcci贸n de bug
  - `docs`: Cambios en documentaci贸n
  - `style`: Cambios de formato (espacios, comas, etc.)
  - `refactor`: Refactorizaci贸n de c贸digo
  - `test`: A帽adir o modificar tests
  - `chore`: Tareas de mantenimiento
- Ejemplos:
  - `feat(products): add palindrome discount logic`
  - `fix(search): resolve case sensitivity issue`
  - `test(palindrome): add Unicode character tests`

##  BUENAS PRCTICAS ESPECFICAS

### Frontend (Next.js/React)
- Componentes funcionales con TypeScript
- Props interfaces bien definidas
- Hooks personalizados para l贸gica reutilizable
- Memoizaci贸n apropiada (useMemo, useCallback)
- Error boundaries para manejo de errores
- Lazy loading de componentes pesados
- Optimizaci贸n de im谩genes con Next.js Image
- SEO b谩sico con meta tags apropiados
- Accesibilidad (aria-labels, semantic HTML)

### Backend (NestJS)
- Inyecci贸n de dependencias apropiada
- DTOs para validaci贸n de entrada y salida
- Guards para autenticaci贸n/autorizaci贸n
- Interceptors para logging y transformaci贸n
- Pipes para validaci贸n y transformaci贸n
- Exception filters para manejo de errores
- Swagger/OpenAPI documentation
- Database transactions para operaciones cr铆ticas
- Proper error handling con status codes HTTP

## 锔 REGLA CRTICA: NO CAMBIOS SIN CONFIRMACIN
- NUNCA generar cambios de c贸digo sin confirmaci贸n expl铆cita del desarrollador
- SIEMPRE preguntar antes de:
  - Crear nuevos archivos
  - Modificar c贸digo existente
  - Instalar nuevas dependencias
  - Cambiar configuraciones
- Proponer cambios y esperar aprobaci贸n
- Explicar el razonamiento detr谩s de cada cambio propuesto

## И TESTING OBLIGATORIO
- Para CADA nueva funcionalidad, considerar y implementar:
  - Tests unitarios para l贸gica de negocio
  - Tests de integraci贸n para APIs
  - Tests E2E para flujos cr铆ticos de usuario
  - Tests de componentes para UI

### Estrategia de Testing por Funcionalidad
1. **Nueva API Endpoint:**
   - Test unitario del service
   - Test de integraci贸n del controller
   - Test E2E del flujo completo

2. **Nuevo Componente UI:**
   - Test unitario de props y estados
   - Test de interacciones de usuario
   - Test E2E si es parte de flujo cr铆tico

3. **Nueva Utilidad/Helper:**
   - Tests unitarios exhaustivos
   - Tests de casos edge
   - Tests de performance si aplica

### Herramientas de Testing
- **Unitarios:** Jest + Testing Library
- **Integraci贸n:** Supertest (backend)
- **E2E:** Playwright
- **Coverage:** M铆nimo 80% en funciones cr铆ticas

##  SEGURIDAD AVANZADA OBLIGATORIA

### Rate Limiting
- Implementar rate limiting en todos los endpoints p煤blicos
- L铆mites diferenciados por tipo de endpoint (b煤squeda vs CRUD)
- Rate limiting basado en IP y/o usuario
- Headers informativos para clientes (X-RateLimit-*)

### Security Headers
- Helmet.js para headers de seguridad autom谩ticos
- Content Security Policy (CSP) apropiado
- HSTS (HTTP Strict Transport Security)
- X-Frame-Options, X-Content-Type-Options
- Referrer-Policy y Feature-Policy

### Secrets Management
- NUNCA hardcodear secrets en c贸digo
- Usar variables de entorno para configuraci贸n sensible
- Validar que todas las env vars cr铆ticas est茅n presentes
- Diferentes secrets por environment (dev/staging/prod)
- Documentar todas las variables requeridas en .env.example

### Input Sanitization
- Sanitizar inputs antes de procesamiento
- Validar tipos de datos estrictamente
- Escape de caracteres especiales en outputs
- Validaci贸n de longitud m谩xima en strings
- Prevenci贸n de NoSQL/SQL injection adicional

### API Security
- Versionado de APIs obligatorio (/api/v1/)
- Response format consistente con error codes
- Logging de intentos de acceso sospechosos
- Timeout apropiados para requests
- Validaci贸n de Content-Type headers
